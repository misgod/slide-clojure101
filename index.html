<!DOCTYPE html>
<html>
<head>
  <title>Clojure 101</title>
  <meta charset="utf-8">
  <meta name="description" content="Clojure 101">
  <meta name="author" content="Sam Lee">
  <meta name="generator" content="slidify" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/default.css" media="all" >
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/phone.css" 
    media="only screen and (max-device-width: 480px)" >
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/slidify.css" >
  <link rel="stylesheet" href="libraries/highlighters/highlight.js/css/solarized_light.css" />
  <base target="_blank"> <!-- This amazingness opens all links in a new tab. -->  <link rel=stylesheet href="./assets/css/ribbons.css"></link>

  
  <!-- Grab CDN jQuery, fall back to local if offline -->
  <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.min.js"></script>
  <script>window.jQuery || document.write('<script src="libraries/widgets/quiz/js/jquery.js"><\/script>')</script> 
  <script data-main="libraries/frameworks/io2012/js/slides" 
    src="libraries/frameworks/io2012/js/require-1.0.8.min.js">
  </script>
  
  

</head>
<body style="opacity: 0">
  <slides class="layout-widescreen">
    
    <!-- LOGO SLIDE -->
        <slide class="title-slide segue nobackground">
  <aside class="gdbar">
    <img src="assets/img/icon.png">
  </aside>
  <hgroup class="auto-fadein">
    <h1>Clojure 101</h1>
    <h2>Lisp + Functional + Dynamic = Fun</h2>
    <p>Sam Lee<br/>A software engineer on the street</p>
  </hgroup>
  <article></article>  
  <footer class = 'license'>
    <a href='http://creativecommons.org/licenses/by-nc-sa/3.0/'>
    <img width = '80px' src = 'http://mirrors.creativecommons.org/presskit/buttons/88x31/png/by-nc-sa.png'>
    </a>
  </footer>
</slide>
    

    <!-- SLIDES -->
    <slide class="" id="slide-1" style="background:;">
  <article data-timings="">
    <style>
.dark q {
  color: white;
}

g {
  color: green;
}

r {
  color: red;
}

strong {
  font-weight: bold;
}


</style>

<h2>Outline</h2>

<ul>
<li><p>Overview</p></li>
<li><p>Clojure Fundamentals</p></li>
<li><p>Functional Programming in Clojure</p></li>
<li><p>Java Interop</p></li>
<li><p>Marco</p></li>
<li><p>Q &amp; A</p></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-2" style="background:#CCC;">
  <hgroup>
    <h3>Alan J. Perlis (Epigrams on Programming)</h3>
  </hgroup>
  <article data-timings="">
    <p><q>&quot;A language that doesn&#39;t affect the way you think about programming, is not worth knowing. &quot; </q></p>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-3" style="background:;">
  <article data-timings="">
    <table><thead>
<tr>
<th>Year</th>
<th>Language</th>
<th>Year</th>
<th>Language</th>
</tr>
</thead><tbody>
<tr>
<td>1957</td>
<td>FORTRAN</td>
<td>1993</td>
<td>Ruby</td>
</tr>
<tr>
<td>1958</td>
<td>LISP</td>
<td>1993</td>
<td>Lua</td>
</tr>
<tr>
<td>1959</td>
<td>COBOL</td>
<td>1995</td>
<td>JavaScript</td>
</tr>
<tr>
<td>1964</td>
<td>BASIC</td>
<td>1995</td>
<td>Java</td>
</tr>
<tr>
<td>1970</td>
<td>Forth</td>
<td>1995</td>
<td>PHP</td>
</tr>
<tr>
<td>1972</td>
<td>C</td>
<td>2000</td>
<td>ActionScript</td>
</tr>
<tr>
<td>1972</td>
<td>Smalltalk</td>
<td>2001</td>
<td>C#</td>
</tr>
<tr>
<td>1983</td>
<td>C++</td>
<td>2001</td>
<td>Visual Basic .NET</td>
</tr>
<tr>
<td>1984</td>
<td>Common Lisp</td>
<td>2002</td>
<td>F#</td>
</tr>
<tr>
<td>1986</td>
<td>Objective-C</td>
<td>2003</td>
<td>Groovy</td>
</tr>
<tr>
<td>1986</td>
<td>Erlang</td>
<td>2003</td>
<td>Scala</td>
</tr>
<tr>
<td>1987</td>
<td>Perl</td>
<td>2007</td>
<td><r>Clojure</r></td>
</tr>
<tr>
<td>1990</td>
<td>Haskell</td>
<td>2009</td>
<td>Go</td>
</tr>
<tr>
<td>1991</td>
<td>Python</td>
<td>2011</td>
<td>Dart</td>
</tr>
<tr>
<td>1991</td>
<td>Visual Basic</td>
<td>2012</td>
<td>Rust</td>
</tr>
</tbody></table>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="segue dark" id="slide-4" style="background:;">
  <hgroup>
    <h2>Overview</h2>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-5" style="background:;">
  <hgroup>
    <h2>Clojure Status</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li><p>started in 2007</p></li>
<li><p>Original author: Rich Hickey</p></li>
<li><p>Latest Stable Release: 1.6.0 (April, 2014)</p></li>
<li><p>Open Source under Eclipse Public License</p></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-6" style="background:;">
  <hgroup>
    <h2>What is Clojure?</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li>Lisp dialect (Code as data)</li>
<li>Dynamic </li>
<li>Functional (immutability)</li>
<li>General-purpose </li>
<li>Compiled</li>
<li>Hosted on JVM, also CLR and JavaScript</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-7" style="background:;">
  <hgroup>
    <h2>Why use Clojure</h2>
  </hgroup>
  <article data-timings="">
    <ul class = "build incremental">
<li>More fun &amp; less code</li>
<li>Focus on problem</li>
<li>Supporting concurrency by default</li>
<li>Interactive programming</li>
<li>Robust, practical &amp; high-performance</li>
<li>Java ecosystem</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-8" style="background:;">
  <hgroup>
    <h2>Development environment</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li><p>REPL</p></li>
<li><p>Light Table (newbie)</p></li>
<li><p>Eclipse with Counterclockwise</p></li>
<li><p>Intellij IDEA with La Clojure</p></li>
<li><p>Emacs with emacs-live (recommend)</p></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="segue dark" id="slide-9" style="background:;">
  <hgroup>
    <h2>Clojure Fundamentals</h2>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-10" style="background:;">
  <hgroup>
    <h2>S-Expressions</h2>
  </hgroup>
  <article data-timings="">
    <p>A Clojure form, and parameter can also be a form.</p>

<pre><code class="clojure">(symbol parameter1 parameter2 ...)
</code></pre>

<pre><code class="clojure">(+ 1 2) ;=&gt; 3
(* 1 3) ;=&gt; 3
(- 3 2) ;=&gt; 1 
(/ 8 2) ;=&gt; 4

(+ 1 2 3) ;=&gt; 6

(+ 1 (+ 2 3) (- 3 2)) ;=&gt; 7

(println &quot;hello!&quot;) 
;hello!
;=&gt; nil

</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-11" style="background:;">
  <hgroup>
    <h2>Actomic Data Types</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li><p>Boolean:  <g> true false </g></p></li>
<li><p>Number:  <g> 1234567890876544321, 1e65, 2r1010, 1.23, 25/7 </g></p></li>
<li><p>String:  <g> &quot;hello&quot; </g></p></li>
<li><p>Character:  <g> \c \b \a \space \newline \tab </g></p></li>
<li><p>Null:  <g> nil </g></p></li>
<li><p>Symbol:  <g> def read zero? +  </g></p></li>
<li><p>Keyword:  <g> :mykey :ethel :tainan </g></p></li>
<li><p>Regex pattern:  <g> #&quot;...pattern...&quot; </g></p></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-12" style="background:;">
  <hgroup>
    <h2>Some Code</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="clojure">(/ 3 5) ;=&gt; 3/5
(* 5 (/ 3 5)) ;=&gt; 3N

(not true) ;=&gt; false
(= &quot;aa&quot; (str &quot;a&quot; &quot;a&quot;) ) ;=&gt; true
(= 1 1) ;=&gt; true

(str &quot;hello&quot; &quot;-&quot; &quot;world&quot; &quot;!&quot;) ;=&gt; hello-world!

(identical? &quot;aa&quot; (str &quot;a&quot; &quot;a&quot;)) ;=&gt; false
(nil? nil) ;=&gt; true 

(class &quot;hello&quot;) ;=&gt; java.lang.String
(class 1) ;=&gt; java.lang.Long
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-13" style="background:#CCC;">
  <hgroup>
    <h3>Alan J. Perlis (Epigrams on Programming)</h3>
  </hgroup>
  <article data-timings="">
    <p><q>&quot;It is better to have 100 functions operate on one data structure than to have 10 functions operate on 10 data structures.&quot; </q></p>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-14" style="background:;">
  <hgroup>
    <h2>Clojure Data Structures</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li><p>List: <g> (1 2 3 4 5), (&quot;abc&quot; &quot;bac&quot; &quot;aaa&quot;), (list 1 2 3) </g></p></li>
<li><p>Vector: <g> [1 2 3 4 5], [Mon Tue Wen Thu] </g></p></li>
<li><p>Map: <g> {:a 1, :b 2, :c 3}, {1 &quot;one&quot; 2 &quot;two&quot;} </g></p></li>
<li><p>Set: <g> #{&quot;foo&quot; &quot;bar&quot; &quot;baz&quot;} </g></p></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-15" style="background:;">
  <hgroup>
    <h2>Some Code</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="clojure">(class [1 2 3]) ;=&gt; clojure.lang.PersistentVector
(class &#39;(1 2 3)) ;=&gt; clojure.lang.PersistentList
(class #{1 2 3}) ;=&gt; clojure.lang.PersistentHashSet
(class {:k1 1 :k2 2}) ;=&gt; clojure.lang.PersistentArrayMap

(str 2 3) ;=&gt; 23
&#39;(str 2 3) ;=&gt; (str 2 3)
(eval &#39;(str 2 3)) ;=&gt;23

(coll? [1 2 3]) ;=&gt; true
(coll? &#39;(1 2 3)) ;=&gt; true
(coll? #{1 2 3}) ;=&gt; true
(coll? {1 2 3 4}) ;=&gt; true

;;Seqs are an interface for logical lists, which can be lazy.
(seq? [1 2 3]) ;=&gt; false
(seq? &#39;(1 2 3)) ;=&gt; true
(seq? #{1 2 3}) ;=&gt; false
(seq? {1 2 3 4}) ;=&gt; false
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-16" style="background:;">
  <hgroup>
    <h2>Some Code (cont.)</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="clojure">(range 5) ;=&gt; (0 1 2 3 4)
(range) ;=&gt; (0 1 2 3 4 5 ...âˆž) ;lazy
(take 5 (range)) ;=&gt; (0 1 2 3 4)
(nth (range) 3) ;=&gt; 3

;;Use cons to add an item to the beginning of a list or vector
(cons 4 [1 2 3]) ; =&gt; (4 1 2 3)
(cons 4 &#39;(1 2 3)) ; =&gt; (4 1 2 3)
;;Add to the beginning of a list, or the end of a vector
(conj [1 2 3] 4) ; =&gt; [1 2 3 4]
(conj &#39;(1 2 3) 4) ; =&gt; (4 1 2 3)

(concat [1 2] &#39;(3 4)) ;=&gt; (1 2 3 4)

(first &#39;(1 2 3)) ;=&gt; 1
(rest &#39;(1 2 3))  ;=&gt; (2 3)
(rest ()) ;=&gt; ()
(empty? ()) ;=&gt; true
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-17" style="background:;">
  <hgroup>
    <h2>Some Code (cont.)</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="clojure">(apply + [1 2 3 4]) ;=&gt; 10  ;;(+ 1 2 3 4)

(count [0 1 2 3]) ;=&gt; 4

(def mymap {:g &quot;Google&quot; :a &quot;Apple&quot; :h &quot;htc&quot; :s &quot;Samsung&quot;}) ;=&gt; #&#39;user/mymap

(count mymap) ;=&gt; 4

(mymap :a) ;=&gt; &quot;Apple&quot;
(:g mymap) ;=&gt; &quot;Google&quot;

(= mymap (hash-map :g &quot;Google&quot; :a &quot;Apple&quot; :h &quot;htc&quot; :s &quot;Samsung&quot;)) ;=&gt; true

(assoc mymap &quot;o&quot; &quot;Oracle&quot;) ;=&gt; {:g &quot;Google&quot; :a &quot;Apple&quot; :o &quot;Oracle :h &quot;htc&quot; :s &quot;Samsung&quot;}
(dissoc mymap :s :h :a) ;=&gt; {:g &quot;Google&quot;}

mymap ;=&gt; {:g &quot;Google&quot; :a &quot;Apple&quot; :h &quot;htc&quot; :s &quot;Samsung&quot;}  ;; immutable
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-18" style="background:;">
  <hgroup>
    <h2>Functions</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="clojure">;; Anonymous
(fn [x y] (* x y))
(fn [&amp; xs] (coll? xs))
(fn sum [x] (+ x (sum dec (x))))
(sum 10) ;;=&gt; Unable to resolve symbol: sum ...

;;In-place function
#(str %1 %2 %3) ;; arguments =&gt; %1 %2 ... %n
</code></pre>

<pre><code class="clojure">(def square (fn [x] (* x x)))
(def square #(* % %))
(square 10) ;=&gt; 100
</code></pre>

<pre><code class="clojure">;; defn =&gt; def + fn
(defn sum 
    [a b c &amp; others] 
    (+ a b c (apply + others)))
(sum 1 2 3 4 5 6 7) ;=&gt; 28
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-19" style="background:;">
  <hgroup>
    <h2>Hello World function</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="clojure">(defn hello
  &quot;Say hello world!&quot;
  [] (println &quot;Hello World!&quot;))

</code></pre>

<pre><code class="clojure">(hello)
;Hello World!
;=&gt; nil
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-20" style="background:;">
  <hgroup>
    <h2>Hello World function with parameter</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="clojure">(defn hello
  &quot;Say hello to someone!&quot;
  ([] (println &quot;Hello World&quot;))
  ([someone] (println &quot;Hello&quot; someone)))

</code></pre>

<pre><code class="clojure">(hello)
;Hello World!
;=&gt; nil

(hello &quot;Sam&quot;)
;Hello Sam
;=&gt; nil
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="segue dark" id="slide-21" style="background:;">
  <hgroup>
    <h2>Functional programming in Clojure</h2>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-22" style="background:;">
  <hgroup>
    <h2>What is Functional programming</h2>
  </hgroup>
  <article data-timings="">
    <p><q>
<strong>Functional programming</strong> is a style of building the structure and elements of computer programs, that treats computation as the evaluation of mathematical functions and avoids state and mutable data. </q></p>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-23" style="background:;">
  <hgroup>
    <h2>Functional Progamming Features</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li><p>First-class functions</p></li>
<li><p>Immutability</p></li>
<li><p>Pure functions (no side effect)</p></li>
<li><p>Recursion</p></li>
<li><p>Expression</p></li>
<li><p>Compose functions</p></li>
<li><p>Lazy evaluation</p></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-24" style="background:;">
  <hgroup>
    <h2>First-class &amp; Higher-order function</h2>
  </hgroup>
  <article data-timings="">
    <h3>First-class means the language supports</h3>

<ol>
<li>passing functions as arguments</li>
<li>returning functions as the values</li>
<li>assigning them to variables or storing them in data structures</li>
</ol>

<h3>Higher-Order Functions is a function that does at least one of the following:</h3>

<ol>
<li>takes one or more functions as an input</li>
<li>outputs a function</li>
</ol>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-25" style="background:;">
  <hgroup>
    <h2>First-class &amp; Higher-order function (Cont.)</h2>
  </hgroup>
  <article data-timings="">
    <h3>Passing functions as arguments</h3>

<pre><code class="clojure">(def square (fn [x] (* x x))) ;=&gt; #&#39;user/square

(def add2 (fn [x] (+ 2 x))) ;=&gt; #&#39;user/add2

(defn sum-by [x f] 
  (apply + (map f x))) ;=&gt; #&#39;user/sum-by

(sum-by [1 2 3] square) ;=&gt; 14

(sum-by [1 2 3] add2) ;=&gt; 12
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-26" style="background:;">
  <hgroup>
    <h2>First-class &amp; Higher-order function (Cont.)</h2>
  </hgroup>
  <article data-timings="">
    <h3>Returning function as value</h3>

<pre><code class="clojure">(defn power [base]
  &quot;Return a power function based on passing argument&quot;
  (let [b base]
    (fn [exp] (Math/pow  b exp))))

(def base2 (power 2))

(def base5 (power 5))


(base2 10) ;=&gt; 1024

(base5 2) ;=&gt; 25
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-27" style="background:;">
  <hgroup>
    <h2>Closure</h2>
  </hgroup>
  <article data-timings="">
    <h4>Any first class function with <strong>free variables</strong> is a closure.</h4>

<pre><code class="clojure">(defn time-n [n]
  (fn [y] (* n y)))

(def time3 (time-n 3))

(time3 10) ;=&gt; 30
</code></pre>

<pre><code class="clojure">(defn grant [uid gid]
  (let [u uid g gid]
    (fn [method] (check u g method))))

(def check-permission (grant 0 1))

(check-permission &quot;api/delete&quot;)

</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-28" style="background:;">
  <hgroup>
    <h2>Recursion</h2>
  </hgroup>
  <article data-timings="">
    <p>A recursive factorial sample</p>

<div style='float:left;width:48%;' class='centered'>
  <p><img src="http://mitpress.mit.edu/sicp/full-text/sicp/book/chapter-1/figs/fact-shape.gif" alt=""></p>

</div>
<div style='float:right;width:48%;'>
  <pre><code class="Clojure">(defn factorial [n]
  (if (= 1 n)
    1
    (* n (factorial (dec n)))))
</code></pre>

<pre><code class="clojure">(factorial 6) ;=&gt; 720

(factorial 10000N) ;=&gt; StackOverFlowError
</code></pre>

</div>
  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-29" style="background:;">
  <hgroup>
    <h2>Tail-recursion</h2>
  </hgroup>
  <article data-timings="">
    <ul class = "build incremental">
<li>JVM does not support tail-call optimization,so StackOverFlowError still exists.</li>
</ul>

<div style='float:left;width:48%;' class='centered'>
  <p><img src="assets/img/tail.png" alt=""></p>

</div>
<div style='float:right;width:48%;'>
  <pre><code class="clojure">(defn fact [n]
  (letfn [(f [i a]
            (if (&lt;= i 1)
              a
              (f (dec i) (* i a))))]
    (f n 1)))    

</code></pre>

</div>
  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-30" style="background:;">
  <hgroup>
    <h2>Tail-recursion with <strong>recur</strong></h2>
  </hgroup>
  <article data-timings="">
    <p><strong>recur</strong> is the only non-stack-consuming looping construct in Clojure.</p>

<pre><code class="clojure">(defn fact [n]
  (loop [i n a 1]
    (if (&lt;= i 1) 
      a 
      (recur (dec i) (* i a)))))
</code></pre>

<pre><code class="clojure">(fact 6) ;=&gt; 720

(fact 10000N) ;=&gt; ...
</code></pre>

<p>BTW... more concise way</p>

<pre><code class="clojure">(defn fact [n]
  (apply * (range 1 (inc n))))

</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-31" style="background:;">
  <hgroup>
    <h2>Partial functions &amp; Compose functions</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="clojure">(def add5 (partial + 5)) ;=&gt; #&#39;user/add5

(add5 5) ;=&gt; 10

((partial + 5) 5) ;=&gt; 10
</code></pre>

<p>BTW ... <strong>Curry</strong> is a chain of partial functions each with a single argument</p>

<pre><code class="clojure">(def not-zero? (comp not zero?)) 

(not-zero? 1) ;=&gt; true
(not-zero? 0) ;=&gt; false

((comp second reverse) &#39;(&quot;a&quot; 2 3 &quot;b&quot;)) ;=&gt; 3
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-32" style="background:;">
  <hgroup>
    <h2>Map, Reduce and Filter</h2>
  </hgroup>
  <article data-timings="">
    
<div style='float:left;width:48%;' class='centered'>
  <h3>Map</h3>

<p><img src="assets/img/map.png" alt=""></p>

<h3>Filter</h3>

<p><img src="assets/img/filter.png" alt=""></p>

</div>
<div style='float:right;width:48%;'>
  <h3>Reduce</h3>

<p><img src="assets/img/reduce.png" alt=""></p>

</div>
  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-33" style="background:;">
  <hgroup>
    <h2>Map, Reduce and Filter</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="Clojure">(def data &#39;(1 2 3 4 5))

(defn square [x] (* x x))

(map square data) ;=&gt; (1 4 9 16 25)
(map #(* % %) data) ;=&gt; (1 4 9 16 25)

(filter odd? data) ;=&gt; (1 3 5)
(filter #(&gt; % 5) data) ;=&gt; ()
(filter (partial &lt; 3) data) ;=&gt; (4 5)

(reduce * data) ;=&gt; 120
(reduce str data) ;=&gt; &quot;12345&quot;
(reduce #(str %2 %1) data) ;=&gt; &quot;54321&quot;

(take 5 (filter odd? (range))) ;=&gt; (1 3 5 7 9)
(take 5 (map #(+ % %) (range))) ;=&gt; (0 2 4 6 8)

(reduce + (range)) ;=&gt; non-stop ..
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-34" style="background:;">
  <hgroup>
    <h2>Lazy evaluation</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li>Sequences can be lazy...</li>
</ul>

<pre><code class="clojure">(cycle [1 2 3]) ;=&gt; (1 2 3 1 2 3 ...)
(repeat &quot;a&quot;) ;=&gt; (&quot;a&quot; &quot;a&quot; &quot;a&quot; ...)
(range) ;=&gt; (0 1 2 3 4 ...)
(class (range)) ;=&gt; clojure.lang.LazySeq

(take 5 (repeat 1)) ;=&gt; (1 1 1 1 1)

</code></pre>

<pre><code class="clojure">(defn n-repeat [n] 
  (lazy-cat 
    (repeat n n) (n-repeat (inc n))))

(n-repeat 1) ;=&gt; (1 2 2 3 3 3 4 4 4 4 5 5 5 5 5 ...)

</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-35" style="background:;">
  <hgroup>
    <h2>Fibonacci Series Example</h2>
  </hgroup>
  <article data-timings="">
    <h3>Simple recursive version</h3>

<pre><code class="clojure">(defn fib1 [n]
  (if (&lt; n 2)
    n
    (+ (fib1 (- n 2)) (fib1 (- n 1)))))
</code></pre>

<pre><code class="clojure">(fib 7) ;=&gt; 13

(take 10 (map fib1 (range))) 
;=&gt; (0 1 1 2 3 5 8 13 21 34)

</code></pre>

<ul class = "build incremental">
<li>Very slow</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-36" style="background:;">
  <hgroup>
    <h2>Fibonacci Series Example (Cont.)</h2>
  </hgroup>
  <article data-timings="">
    <h3>Memoized recursive version</h3>

<pre><code class="clojure">(defn fib2 [n]
  (if (&lt; n 2)
    n
    (+&#39; (mfib (- n 2)) (mfib (- n 1)))))

(def mfib (memoize fib2))
</code></pre>

<pre><code class="clojure">(mfib 1000) ;=&gt; StackOverflowError

(take 10000 (map mfib (range))) ;=&gt; (0 1 1 ...)
</code></pre>

<ul class = "build incremental">
<li>Speed up but StackOverflowError</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-37" style="background:;">
  <hgroup>
    <h2>Fibonacci Series Example (Cont.)</h2>
  </hgroup>
  <article data-timings="">
    <h3>Tail recursion version</h3>

<pre><code class="clojure">(defn fib3 [n]
  (loop [i n p 0 acc 1]
    (if (zero? i)
      p
      (recur (dec i) acc (+&#39; acc p)))))
</code></pre>

<pre><code class="clojure">(map fib3 (range  10)) ;=&gt; (0 1 1 2 3 5 8 13 21 34)

(count (str (fib3 100000))) ;=&gt; 20899

</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-38" style="background:;">
  <hgroup>
    <h2>Fibonacci Series Example (Cont.)</h2>
  </hgroup>
  <article data-timings="">
    <h3>Lazy version -1</h3>

<pre><code class="clojure">(def fib4
  ((fn f [p c]
     (cons p (lazy-seq (f c (+&#39; p c)))))
   0 1))
</code></pre>

<pre><code class="clojure">fib4  ;=&gt; (0 1 1 2 3 5 8 ...)

(count (str (nth fib4 100000))) ;=&gt; 20899

</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-39" style="background:;">
  <hgroup>
    <h2>Fibonacci Series Example (Cont.)</h2>
  </hgroup>
  <article data-timings="">
    <h3>Lazy version -2</h3>

<pre><code class="clojure">(def fib5 (lazy-cat [0 1] (map +&#39; fib5 (rest fib5))))
</code></pre>

<pre><code class="clojure">fib5  ;=&gt; (0 1 1 2 3 5 8 ...)

(take 10 fib5) ;=&gt; (0 1 1 2 3 5 8 13 21 34)
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-40" style="background:;">
  <hgroup>
    <h2>Clojure in JVM</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li><p>Clojure strings are Java <strong>Strings</strong>.</p></li>
<li><p>Clojure <strong>nil</strong> is Javaâ€™s <strong>null</strong>.</p></li>
<li><p>Clojure numbers are Java numbers.</p></li>
<li><p>Clojure regular expressions are instances of <strong>java.util.regex.Pattern</strong>.</p></li>
<li><p>Clojure data structures </p>

<ul>
<li>Clojure maps implement <strong>java.util.Map</strong></li>
<li>Clojure vectors and sequences and lists implement <strong>java.util.List</strong></li>
<li>Clojure sets implement <strong>java.util.Set</strong></li>
</ul></li>
<li><p>Clojure functions implement <strong>java.lang.Runnable</strong> and <strong>java.util.concurrent.Callable</strong></p></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-41" style="background:;">
  <hgroup>
    <h2>Java Interop</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="Clojure">(.toUpperCase &quot;abc&quot;) ;=&gt; ABC

;; static method
(Integer/parseInt &quot;10&quot;) ;=&gt; 10

;; new Object
(java.io.File. &quot;~/test.txt&quot;) ;=&gt; #&lt;File ~/test.txt&gt;

(instance? String &quot;foo&quot;)  ;=&gt; true
</code></pre>

<pre><code class="Clojure">(import java.util.ArrayList)
(def foo (ArrayList. [1 2 3 4]))

(reduce + foo) ;=&gt; 10

(seq foo) ;=&gt; (1 2 3 4)

(.containsAll foo [2 3 4]) ;=&gt; 4


</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-42" style="background:;">
  <hgroup>
    <h2>Java Interop (Cont.)</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="Clojure">;;; Modify object&#39;s field
(def pt (java.awt.Point. 5 10))  ;=&gt; #&#39;user/pt

(.x pt)  ;=&gt; 5
(set! (.x pt) 10) ;=&gt; 10
(.x pt) ;=&gt; 10
</code></pre>

<pre><code class="Clojure">;;; Type hints
(defn #^String reverse
  [#^String s]
  (clojure.string/reverse s)) 

(reverse &quot;abcd&quot;) ;=&gt; &quot;dcba&quot;

</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-43" style="background:;">
  <hgroup>
    <h2>Macro</h2>
  </hgroup>
  <article data-timings="">
    
<div style='float:left;width:48%;' class='centered'>
  <p><img src="http://images.cnitblog.com/blog/17329/201303/18183535-cb7fa8bff7f04c45ac1ec277ca779025.png" alt=""></p>

</div>
<div style='float:right;width:48%;'>
  <ul>
<li><p>Lisp is a <strong>programmable</strong> programming languages.</p></li>
<li><p><strong>Homoiconicity</strong></p>

<ul>
<li>Code written in the language is encoded as data structures.</li>
</ul></li>
<li><p>Extends your code in <strong>compile time</strong>.</p></li>
</ul>

</div>
  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-44" style="background:;">
  <hgroup>
    <h2>Macro</h2>
  </hgroup>
  <article data-timings="">
    <p>A simple macro example..</p>

<pre><code class="clojure">(defmacro postfix
  [expr]
  (conj (butlast expr) (last expr)))

(macroexpand-1 &#39;(postfix (1 1 +))) ; =&gt; (+ 1 1)

(postfix (1 2 3 +)) ;=&gt; 6
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-45" style="background:;">
  <hgroup>
    <h2>Macro</h2>
  </hgroup>
  <article data-timings="">
    <p>A funny example ...</p>

<pre><code class="clojure">(require &#39;(clojure [string :as str]
                   [walk :as walk]))
(defmacro reverse-it 
  [form]
  (walk/postwalk #(if (symbol? %)
                   (symbol (str/reverse (name %)))
                    %)
                 form))
</code></pre>

<pre><code class="clojure">(reverse-it
 (qesod [gra (egnar 3)]
        (nltnirp &quot;hello &quot;(cni gra)))) 

;hello 1
;hello 2
;hello 3
;=&gt; nil

</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-46" style="background:;">
  <hgroup>
    <h2>Useful Built-in Macro</h2>
  </hgroup>
  <article data-timings="">
    <h4>(-&gt; x form &amp; more)</h4>

<pre><code class="Clojure">(def c 5)
;; infix: ((c + 3) / 2 - 1)
(- (/ (+ c 3) 2) 1) ;=&gt; 3

(-&gt; c (+ 3) (/ 2) (- 1)) ;=&gt; 3
</code></pre>

<pre><code class="clojure">(first (.split (.replace (.toUpperCase &quot;a b c d&quot;)
                         &quot;A&quot;
                         &quot;X&quot;)
               &quot; &quot;)) ;=&gt; X

(-&gt; &quot;a b c d&quot;
    (.toUpperCase)
    (.replace &quot;A&quot; &quot;X&quot;)
    (.split &quot; &quot;)
    (first)) ;=&gt; X
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-47" style="background:;">
  <hgroup>
    <h2>Useful Built-in Macro (cont.)</h2>
  </hgroup>
  <article data-timings="">
    <h4>(-&gt;&gt; x form &amp; more)</h4>

<pre><code class="Clojure">(def c 5)
(-&gt;&gt; c (+ 3) (/ 2) (- 1)) ;=&gt; 3/4
;; (-1 (/ 2 (+3 c)))
</code></pre>

<pre><code class="clojure">(reduce +
        (take 10
              (filter even?
                      (map #(* % %)
                           (range)))))  ;=&gt; 1140

(-&gt;&gt; (range)
     (map #(* % %))
     (filter even?)
     (take 10)
     (reduce +)) ;=&gt; 1140                          
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-48" style="background:;">
  <hgroup>
    <h2>Useful Built-in Macro (cont.)</h2>
  </hgroup>
  <article data-timings="">
    <h4>(doto x &amp; forms)</h4>

<pre><code class="Clojure">(import javax.swing.JFrame)

(doto (JFrame.)
  (.setTitle &quot;title&quot;)
  (.setBackground java.awt.Color/white)
  (.setSize (java.awt.Dimension. 500 500))
  (.setDefaultCloseOperation JFrame/DISPOSE_ON_CLOSE)
  (.setVisible true))
</code></pre>

<pre><code class="clojure">(doto (java.util.HashMap.)
  (.put &quot;a&quot; 1)
  (.put &quot;b&quot; 2)
  (.put &quot;c&quot; 3)) ;=&gt; #&lt;HashMap {b=2, a=1, c=3}&gt;   

</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="segue dark" id="slide-49" style="background:;">
  <hgroup>
    <h2>Q &amp; A</h2>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-50" style="background:;">
  <hgroup>
    <h2>Some Learning Material</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li><p>Online</p>

<ul>
<li>Try Clojure (<a href="http://tryclj.com/">http://tryclj.com/</a>)</li>
<li>Clojure Koans (<a href="http://clojurekoans.com/">http://clojurekoans.com/</a>)</li>
<li>4clojure (<a href="https://www.4clojure.com/">https://www.4clojure.com/</a>) (good!)</li>
<li>ClojureTV on Youtube</li>
</ul></li>
<li><p>Books</p>

<ul>
<li>Clojure Programming (<a href="http://www.clojurebook.com/">http://www.clojurebook.com/</a>)</li>
<li>The Joy of Clojure (Not for beginner)</li>
</ul></li>
<li><p>Toolbox </p>

<ul>
<li><a href="http://www.clojure-toolbox.com/">http://www.clojure-toolbox.com/</a></li>
</ul></li>
<li><p>Cheatsheet</p>

<ul>
<li><a href="http://clojure.org/cheatsheet">http://clojure.org/cheatsheet</a></li>
</ul></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

    <slide class="backdrop"></slide>
  </slides>
  <div class="pagination pagination-small" id='io2012-ptoc' style="display:none;">
    <ul>
      <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=1 title=''>
         1
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=2 title='Alan J. Perlis (Epigrams on Programming)'>
         2
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=3 title=''>
         3
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=4 title='Overview'>
         4
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=5 title='Clojure Status'>
         5
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=6 title='What is Clojure?'>
         6
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=7 title='Why use Clojure'>
         7
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=8 title='Development environment'>
         8
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=9 title='Clojure Fundamentals'>
         9
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=10 title='S-Expressions'>
         10
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=11 title='Actomic Data Types'>
         11
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=12 title='Some Code'>
         12
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=13 title='Alan J. Perlis (Epigrams on Programming)'>
         13
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=14 title='Clojure Data Structures'>
         14
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=15 title='Some Code'>
         15
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=16 title='Some Code (cont.)'>
         16
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=17 title='Some Code (cont.)'>
         17
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=18 title='Functions'>
         18
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=19 title='Hello World function'>
         19
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=20 title='Hello World function with parameter'>
         20
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=21 title='Functional programming in Clojure'>
         21
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=22 title='What is Functional programming'>
         22
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=23 title='Functional Progamming Features'>
         23
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=24 title='First-class &amp; Higher-order function'>
         24
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=25 title='First-class &amp; Higher-order function (Cont.)'>
         25
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=26 title='First-class &amp; Higher-order function (Cont.)'>
         26
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=27 title='Closure'>
         27
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=28 title='Recursion'>
         28
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=29 title='Tail-recursion'>
         29
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=30 title='Tail-recursion with <strong>recur</strong>'>
         30
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=31 title='Partial functions &amp; Compose functions'>
         31
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=32 title='Map, Reduce and Filter'>
         32
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=33 title='Map, Reduce and Filter'>
         33
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=34 title='Lazy evaluation'>
         34
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=35 title='Fibonacci Series Example'>
         35
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=36 title='Fibonacci Series Example (Cont.)'>
         36
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=37 title='Fibonacci Series Example (Cont.)'>
         37
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=38 title='Fibonacci Series Example (Cont.)'>
         38
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=39 title='Fibonacci Series Example (Cont.)'>
         39
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=40 title='Clojure in JVM'>
         40
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=41 title='Java Interop'>
         41
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=42 title='Java Interop (Cont.)'>
         42
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=43 title='Macro'>
         43
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=44 title='Macro'>
         44
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=45 title='Macro'>
         45
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=46 title='Useful Built-in Macro'>
         46
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=47 title='Useful Built-in Macro (cont.)'>
         47
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=48 title='Useful Built-in Macro (cont.)'>
         48
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=49 title='Q &amp; A'>
         49
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=50 title='Some Learning Material'>
         50
      </a>
    </li>
  </ul>
  </div>  <!--[if IE]>
    <script 
      src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js">  
    </script>
    <script>CFInstall.check({mode: 'overlay'});</script>
  <![endif]-->
</body>
  <!-- Load Javascripts for Widgets -->
  
  <!-- MathJax: Fall back to local if CDN offline but local image fonts are not supported (saves >100MB) -->
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        processEscapes: true
      }
    });
  </script>
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  <!-- <script src="https://c328740.ssl.cf1.rackcdn.com/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script> -->
  <script>window.MathJax || document.write('<script type="text/x-mathjax-config">MathJax.Hub.Config({"HTML-CSS":{imageFont:null}});<\/script><script src="libraries/widgets/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"><\/script>')
</script>
<!-- LOAD HIGHLIGHTER JS FILES -->
  <script src="libraries/highlighters/highlight.js/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <!-- DONE LOADING HIGHLIGHTER JS FILES -->
   
  </html>